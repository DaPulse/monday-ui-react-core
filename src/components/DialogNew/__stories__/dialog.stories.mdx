import Dialog from "../Dialog";
import { useRef, useState } from "react";
import { ArgsTable, Story, Canvas, Meta } from "@storybook/addon-docs";
import { createStoryMetaSettings } from "../../../storybook/functions/create-component-story";
import "./Dialog.stories.scss";
import Button from "../../Button/Button";
import { Flex, TextField } from "components"; import {
  StoryDescription
} from "../../../storybook/components/story-description/story-description";

export const metaSettings = createStoryMetaSettings({
  component: Dialog,
  enumPropNamesArray: [], // List enum props here
  iconPropNamesArray: [], // List props that are typed as icons here
  actionPropsArray: [] // List the component's actions here
});

<Meta
  title="Feedback/Dialog"
  component={Dialog}
  argTypes={metaSettings.argTypes}
  decorators={metaSettings.decorators}
/>

<!--- Component template -->

[//]: # "export const modalNewTemplate = createComponentTemplate(ModalNew);"

export const DialogTemplate = ({
  id = 'sample-id',
  buttonTitle = "Open dialog",
  content = <p>Dialog Content</p>,
  title = "Dialog title",
  isAlertDialog = false,
  size = 'medium'
}) => {
  const [show, setShow] = useState(false);
  const buttonRef = useRef(null);
  const hideDialog = () => setShow(false);
  return (
    <div>
      <Button ref={buttonRef} onClick={() => setShow(true)}>
        {buttonTitle}
      </Button>
      <Dialog
        id={id}
        show={show}
        title={title}
        isAlertDialog={isAlertDialog}
        onHide={hideDialog}
        size={size}
        triggerElement={buttonRef.current}
        classNames={{ content: "monday-storybook-modal-new-content-wrapper" }}
      >
        {content}
        <div className="monday-storybook-modal-new-buttons">
          <Button kind={Button.kinds.SECONDARY} onClick={hideDialog}>
            Cancel
          </Button>
          <Button kind={Button.kinds.PRIMARY} onClick={hideDialog}>
            Confirm
          </Button>
        </div>
      </Dialog>
    </div>
  );
};

<!--- Component documentation -->

# Dialog

- [Overview](#overview)
- [Props](#props)
- [Usage](#usage)
- [Variants](#variants)
- [Do’s and don’ts](#dos-and-donts)
- [Use cases and examples](#use-cases-and-examples)
- [Related components](#related-components)
- [Feedback](#feedback)

## Overview

An easy to use accessible Dialog component

<Canvas>
  <Story
    name="Overview"
    args={{ title: "Dialog title", buttonTitle: "open Dialog", content: <p>Dialog content goes here</p> }}
  >
    {DialogTemplate.bind({})}
  </Story>
</Canvas>

## Props

<ArgsTable of={Dialog} />

## Usage
### Showing the dialog
You show/hide the dialog by passing the <b>show</b> prop. This gives you complete control on when to show and hide the dialog.
One thing to consider is when the user initiate closing the dialog by

### Dialog content

### Design and customizations


<UsageGuidelines guidelines={["Usage guideline 1", "Usage guideline 2", "Usage guideline 3"]} />

<Tip title="Not what you were looking for?">Tip content</Tip>

## Variants

### Alert Dialog (Modal)

This dialog will NOT be closed when you click outside or click ESC key. Only way to close it is to use the close button.

<UsageGuidelines guidelines={["set `isAlertDialog` to `true` in order to turn a dialog to modal."]} />

<Canvas>
  <Story
    name="Alert Dialog"
    args={{
      title: "Dialog title",
      buttonTitle: "open Modal",
      isAlertDialog: true,
      content: <p>Use the close button to dismiss this Modal.</p>
    }}
  >
    {DialogTemplate.bind({})}
  </Story>
</Canvas>

### Dialog with a form

<UsageGuidelines
  guidelines={[
    "The dialog is capturing the focus. Use TAB ket to jump throw the close button and the inputs.",
    "Use Alert dialog so the user won't close the dialog by mistake and loose changes."
  ]}
/>

<Canvas>
  <Story
    name="Form Dialog"
    args={{
      title: "Dialog title",
      buttonTitle: "open From Dialog",
      isAlertDialog: true,
      content: (
        <form>
          <TextField title="Your Name" autoFocus size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
        </form>
      )
    }}
  >
    {DialogTemplate.bind({})}
  </Story>
</Canvas>

### Size variants

<Canvas>
  <Story name="Size variants">
    <Flex direction={Flex.directions.ROW} gap={Flex.gaps.SMALL}>
      <StoryDescription description="S" vertical align={Flex.align.START}>
        <div className="monday-storybook-loader_size-variants_container">
          <DialogTemplate size={'small'} />
        </div>
      </StoryDescription>
      <StoryDescription description="M" vertical align={Flex.align.START}>
        <div className="monday-storybook-loader_size-variants_container">
          <DialogTemplate size={'medium'} />
        </div>
      </StoryDescription>
      <StoryDescription description="L" vertical align={Flex.align.START}>
        <div className="monday-storybook-loader_size-variants_container">
          <DialogTemplate size={'large'} />
        </div>
      </StoryDescription>
      <StoryDescription description="Full Width" vertical align={Flex.align.START}>
        <div className="monday-storybook-loader_size-variants_container">
          <DialogTemplate size={'full_width'} />
        </div>
      </StoryDescription>
    </Flex>
  </Story>
</Canvas>

## Use cases and examples

### Dialog with vertical scroll

The height of dialog with long content will be limited to 90% of screen height, and a scroll bar will be added

<Canvas>
  <Story
    name="Dialog with vertical scroll"
    args={{
      title: "Dialog title",
      buttonTitle: "open long Dialog",
      content: (
        <form>
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
          <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
        </form>
      )
    }}
  >
    {DialogTemplate.bind({})}
  </Story>
</Canvas>

## Related components

[//]: # "<RelatedComponents componentsNames={[]} />"
