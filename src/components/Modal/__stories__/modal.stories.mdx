import Modal from "../Modal";
import { useStorybookModalHelper } from "./helpers";
import { useRef, useState } from "react";
import { ArgsTable, Story, Canvas, Meta } from "@storybook/addon-docs";
import { createStoryMetaSettings } from "../../../storybook/functions/create-component-story";
import "./Modal.stories.scss";
import Button from "../../Button/Button";
import { Flex, ModalContent, ModalFooter, ModalHeader, TextField } from "components";
import { StoryDescription } from "../../../storybook/components/story-description/story-description";

export const metaSettings = createStoryMetaSettings({
  component: Modal,
  enumPropNamesArray: [], // List enum props here
  iconPropNamesArray: [], // List props that are typed as icons here
  actionPropsArray: [] // List the component's actions here
});

<Meta title="Feedback/Modal" component={Modal} argTypes={metaSettings.argTypes} decorators={metaSettings.decorators} />

<!--- Component documentation -->

# Modal

- [Overview](#overview)
- [Props](#props)
- [Usage](#usage)
- [Variants](#variants)
- [Do’s and don’ts](#dos-and-donts)
- [Use cases and examples](#use-cases-and-examples)
- [Related components](#related-components)
- [Feedback](#feedback)

## Overview

An easy to use accessible Modal component

<Canvas>
  <Story name="Overview">
    {() => {
      const { openDialogButton, modalButtons, show, closeModal, ref} = useStorybookModalHelper();
      return (
        <div>
          {openDialogButton}
          <Modal
            id={"story-book-modal"}
            title={"Modal title"}
            triggerElement={ref.current}
            show={show}
            onClose={closeModal}
            closeButtonAriaLabel={"close"}
          >
            <ModalContent>Modal content goes here</ModalContent>
            <ModalFooter>
              {modalButtons}
            </ModalFooter>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>

## Props

<ArgsTable of={Modal} />

## Usage

### Showing the Modal

You show/hide the Modal by passing the <b>show</b> prop. This gives you complete control on when to show and hide the Modal.
One thing to consider is when the user initiate closing the Modal by

### Modal content

### Design and customizations

<UsageGuidelines guidelines={["Usage guideline 1", "Usage guideline 2", "Usage guideline 3"]} />

<Tip title="Not what you were looking for?">Tip content</Tip>

## Variants

### Alert Modal (Modal)

This Modal will NOT be closed when you click outside or click ESC key. Only way to close it is to use the close button.

<UsageGuidelines guidelines={["set `isAlertDialog` to `true` in order to turn a Modal to modal."]} />

<Canvas>
  <Story
    name="Alert Modal"
  >
    {() => {
      const { openDialogButton, modalButtons, show, closeModal, ref} = useStorybookModalHelper();
      return (
        <div>
          {openDialogButton}
          <Modal
            id={"story-book-modal"}
            title={"Modal title"}
            triggerElement={ref.current}
            show={show}
            onClose={closeModal}
            isAlertDialog
            closeButtonAriaLabel={"close"}
          >
            <p>Use the close button to dismiss this Modal.</p>
            <ModalFooter>
              {modalButtons}
            </ModalFooter>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>

### Modal with a form

<UsageGuidelines
  guidelines={[
    "The Modal is capturing the focus. Use TAB ket to jump throw the close button and the inputs.",
    "Use Alert Modal so the user won't close the Modal by mistake and loose changes."
  ]}
/>

<Canvas>
  <Story
    name="Form Modal"
  >
    {() => {
      const { openDialogButton, modalButtons, show, closeModal, ref} = useStorybookModalHelper();
      return (
        <div>
          {openDialogButton}
          <Modal
            id={"story-book-modal"}
            title={"Modal title"}
            triggerElement={ref.current}
            show={show}
            onClose={closeModal}
            isAlertDialog
            closeButtonAriaLabel={"close"}
          >
            <ModalContent>
              <form>
                <TextField title="Your Name" autoFocus size={TextField.sizes.MEDIUM} placeholder="John Doe" />
                <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
                <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
                <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
                <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              </form>
            </ModalContent>
            <ModalFooter>
              {modalButtons}
            </ModalFooter>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>

### Size variants

<Canvas>
  <Story name="Size variants - Normal">
    {() => {
      const { openDialogButton, modalButtons, show, closeModal, ref} = useStorybookModalHelper({openButtonTitle: 'Default'});
      return (
        <div>
          {openDialogButton}
          <Modal
            id={"story-book-modal"}
            title={"Modal title"}
            triggerElement={ref.current}
            show={show}
            onClose={closeModal}
            closeButtonAriaLabel={"close"}
            size={Modal.Size.DEFAULT}
          >
            <p>Normal modal</p>
            <ModalFooter>
              {modalButtons}
            </ModalFooter>
          </Modal>
        </div>
      );
    }}
  </Story>
  <Story name="Size variants - Full">
    {() => {
      const { openDialogButton, modalButtons, show, closeModal, ref} = useStorybookModalHelper({openButtonTitle: 'Full width'});
      return (
        <div>
          {openDialogButton}
          <Modal
            id={"story-book-modal"}
            title={"Modal title"}
            triggerElement={ref.current}
            show={show}
            onClose={closeModal}
            size={Modal.Size.FULL_WIDTH}
            closeButtonAriaLabel={"close"}
          >
            <p>Full width modal</p>
            <ModalFooter>
              {modalButtons}
            </ModalFooter>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>

## Use cases and examples

### Modal with vertical scroll

The height of Modal with long content will be limited to 90% of screen height, and a scroll bar will be added

<Canvas>
  <Story
    name="Modal with vertical scroll"
  >
    {() => {
      const { openDialogButton, modalButtons, show, closeModal, ref} = useStorybookModalHelper({openButtonTitle: 'Default'});
      return (
        <div>
          {openDialogButton}
          <Modal
            id={"story-book-modal"}
            title={"Modal title"}
            triggerElement={ref.current}
            show={show}
            onClose={closeModal}
            closeButtonAriaLabel={"close"}
          >
            <form>
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Your Name" size={TextField.sizes.MEDIUM} placeholder="John Doe" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
              <TextField title="Email" size={TextField.sizes.MEDIUM} placeholder="email@monday.com" />
            </form>
            <ModalFooter>
              {modalButtons}
            </ModalFooter>
          </Modal>
        </div>
      );
    }}
  </Story>
</Canvas>

## Related components

[//]: # "<RelatedComponents componentsNames={[]} />"
