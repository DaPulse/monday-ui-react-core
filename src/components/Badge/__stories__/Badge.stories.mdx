import Badge from "../Badge";
import { ArgsTable, Story, Canvas, Meta } from "@storybook/addon-docs";
import person from "./assets/person.png";
import { ExternalPage, WhatsNew } from "../../Icon/Icons";
import Link from "../../Link/Link";
import Button from "../../Button/Button";
import Flex from "../../Flex/Flex";
import Avatar from "../../Avatar/Avatar";
import { useSwitch } from "../../../hooks";
import Checkbox from "../../Checkbox/Checkbox";
import { createStoryMetaSettingsDecorator } from "../../../storybook";
import { createComponentTemplate } from "vibe-storybook-components";
import { BUTTON, COUNTER, LINK } from "../../../storybook/components/related-components/component-description-map";

export const metaSettings = createStoryMetaSettingsDecorator({
  component: Badge,
  enumPropNamesArray: ["color", "position", "type"],
  iconPropNamesArray: [],
  actionPropsArray: []
});

<Meta title="Feedback/Badge" component={Badge} argTypes={metaSettings.argTypes} decorators={metaSettings.decorators} />

<!--- Component template -->

export const badgeTemplate = createComponentTemplate(Badge);

<!--- Component documentation -->

# Badge

- [Overview](#overview)
- [Props](#props)
- [Variants](#variants)
- [Do’s and don’ts](#dos-and-donts)
- [Use cases and examples](#use-cases-and-examples)
- [Related components](#related-components)
- [Feedback](#feedback)

## Overview

Badge component is responsible for positioning an indicator/counter on a child component

<Canvas>
  <Story name="Overview" args={{ children: <Button leftIcon={WhatsNew}>What's new</Button> }}>
    {badgeTemplate.bind({})}
  </Story>
</Canvas>

## Props

<ArgsTable story="Overview" />

## Variants

### Block component

<Canvas>
  <Story name="Block component">
    <Flex gap={Flex.gaps.LARGE} justify={Flex.justify.SPACE_AROUND} style={{ flex: 1 }}>
      <Flex direction={Flex.directions.COLUMN} gap={Flex.gaps.LARGE}>
        Indicator
        <Badge>
          <Button leftIcon={WhatsNew}>What's new</Button>
        </Badge>
        <Badge>
          <Button kind={Button.kinds.SECONDARY} leftIcon={WhatsNew}>
            What's new
          </Button>
        </Badge>
        <Badge>
          <Button kind={Button.kinds.TERTIARY} leftIcon={WhatsNew}>
            What's new
          </Button>
        </Badge>
      </Flex>
      <Flex direction={Flex.directions.COLUMN} gap={Flex.gaps.LARGE}>
        Counter
        <Badge type={Badge.types.COUNTER}>
          <Button leftIcon={WhatsNew}>What's new</Button>
        </Badge>
        <Badge type={Badge.types.COUNTER}>
          <Button kind={Button.kinds.SECONDARY} leftIcon={WhatsNew}>
            What's new
          </Button>
        </Badge>
        <Badge type={Badge.types.COUNTER}>
          <Button kind={Button.kinds.TERTIARY} leftIcon={WhatsNew}>
            What's new
          </Button>
        </Badge>
      </Flex>
    </Flex>
  </Story>
</Canvas>

### Circular component

<Canvas>
  <Story name="Circular component">
    {() => {
      const { isChecked: circular, onChange: setCircular } = useSwitch({ defaultChecked: true });
      return (
        <Flex direction={Flex.directions.COLUMN} align={Flex.align.START} gap={Flex.gaps.MEDIUM}>
          <Badge circular={circular}>
            <Avatar size={Avatar.sizes.LARGE} src={person} type={Avatar.types.IMG} />
          </Badge>
          <Checkbox label="Circular" checked={circular} onChange={setCircular} />
        </Flex>
      );
    }}
  </Story>
</Canvas>

### Transparent component

<Canvas>
  <Story name="Transparent component">
    <Flex direction={Flex.directions.COLUMN} gap={Flex.gaps.MEDIUM} align={Flex.align.START}>
      <Badge outbound>
        <Link text="Read more" />
      </Badge>
      <Badge outbound>
        <Link text="What's new" iconPosition={Link.iconPositions.START} icon={WhatsNew} />
      </Badge>
      <Badge outbound>
        <Link text="Learn more" iconPosition={Link.iconPositions.END} icon={ExternalPage} />
      </Badge>
    </Flex>
  </Story>
</Canvas>

### Positioning

We can set the position of the badge in any of the edges of its child component

<Canvas>
  <Story name="Positioning">
    <Flex direction={Flex.directions.COLUMN} gap={Flex.gaps.LARGE}>
      <Flex gap={Flex.gaps.LARGE}>
        <Badge type={Badge.types.COUNTER} position={Badge.positions.TOP_START}>
          <Button kind={Button.kinds.SECONDARY} leftIcon={WhatsNew}>
            Top left
          </Button>
        </Badge>
        <Badge type={Badge.types.COUNTER} position={Badge.positions.TOP_END}>
          <Button kind={Button.kinds.SECONDARY} leftIcon={WhatsNew}>
            Top right
          </Button>
        </Badge>
      </Flex>
      <Flex gap={Flex.gaps.LARGE}>
        <Badge type={Badge.types.COUNTER} position={Badge.positions.BOTTOM_START}>
          <Button kind={Button.kinds.SECONDARY} leftIcon={WhatsNew}>
            Bottom left
          </Button>
        </Badge>
        <Badge type={Badge.types.COUNTER} position={Badge.positions.BOTTOM_END}>
          <Button kind={Button.kinds.SECONDARY} leftIcon={WhatsNew}>
            Bottom right
          </Button>
        </Badge>
      </Flex>
    </Flex>
  </Story>
</Canvas>

## Do’s and Don’ts

<ComponentRules
  rules={[
    {
      positive: {
        component: (
          <Badge outbound>
            <Link text="Read more" />
          </Badge>
        ),
        description: "When using transparent component, apply 'outbound' to it"
      },
      negative: {
        component: (
          <Badge>
            <Link text="Read more" />
          </Badge>
        ),
        description: "Do not leave the indicator in the component boundaries"
      }
    },
    {
      positive: {
        component: (
          <Badge circular>
            <Avatar size={Avatar.sizes.MEDIUM} src={person} type={Avatar.types.IMG} />
          </Badge>
        ),
        description: "On circular components (like Avatar), apply 'circular' to it"
      },
      negative: {
        component: (
          <Badge>
            <Avatar size={Avatar.sizes.MEDIUM} src={person} type={Avatar.types.IMG} />
          </Badge>
        ),
        description: "Do not leave the indicator in the block edges"
      }
    },
    {
      positive: {
        component: (
          <Badge color={Badge.colors.PRIMARY} border>
            <Button leftIcon={WhatsNew}>What's new</Button>
          </Badge>
        ),
        description: "When using badge with same color as the child component, use 'border' prop"
      },
      negative: {
        component: (
          <Badge color={Badge.colors.PRIMARY}>
            <Button leftIcon={WhatsNew}>What's new</Button>
          </Badge>
        ),
        description: "Do not have the indicator and child component mixed together"
      }
    },
    {
      positive: {
        component: (
          <Badge circular>
            <Avatar size={Avatar.sizes.MEDIUM} src={person} type={Avatar.types.IMG} />
          </Badge>
        ),
        description: "When using Indicator badge, position it at the top-right edge"
      },
      negative: {
        component: (
          <Badge circular position={Badge.positions.TOP_START}>
            <Avatar size={Avatar.sizes.MEDIUM} src={person} type={Avatar.types.IMG} />
          </Badge>
        ),
        description: "Do not place it on any other edge"
      }
    }
  ]}
/>

## Related components

<RelatedComponents componentsNames={[LINK, BUTTON, COUNTER]} />
