import { useState } from "react";
import moment from "moment";
import DatePickerComponent from "../DatePicker";
import { ArgsTable, Story, Canvas, Meta } from "@storybook/addon-docs";
import { createComponentTemplate, createStoryMetaSettings } from "../../../storybook";
import {
  TEXT_FIELD,
  DROPDOWN,
  DIALOG_CONTENT_CONTAINER
} from "../../../storybook/components/related-components/component-description-map";
import "./DatePicker.stories.scss";
import DialogContentContainer from "../../DialogContentContainer/DialogContentContainer";

export const metaSettings = createStoryMetaSettings({
  component: DatePicker
});

export const DatePicker = props => {
  const [date, setDate] = useState(props.range ? {} : null);
  return (
    <DialogContentContainer className={"datepicker-dialog-content-container"}>
      {props.range ? (
        <DatePickerComponent date={date.startDate} endDate={date.endDate} onPickDate={d => setDate(d)} {...props} />
      ) : (
        <DatePickerComponent date={date} onPickDate={d => setDate(d)} {...props} />
      )}
    </DialogContentContainer>
  );
};

<Meta
  title="PICKERS/DatePicker"
  component={DatePickerComponent}
  argTypes={metaSettings.argTypes}
  decorators={metaSettings.decorators}
/>

<!--- Component template -->

export const datePickerTemplate = createComponentTemplate(DatePicker);

<!--- Component documentation -->

# DatePicker

- [Overview](#overview)
- [Props](#props)
- [Variants](#variants)
- [Feedback](#feedback)

## Overview

A simple and reusable Datepicker component

<Canvas>
  <Story name="Overview">{datePickerTemplate.bind({})}</Story>
</Canvas>

## Props

<ArgsTable of={DatePickerComponent} />

## Variants

### Single day

Allows users to select a single date

<Canvas>
  <Story name="Single Day">
    <DatePicker />
  </Story>
</Canvas>

### Date range

Allows users to select a date range

<Canvas>
  <Story name="Date Range">
    <DatePicker range />
  </Story>
</Canvas>

### Number of months

<Canvas>
  <Story name="Number Of Months">
    <DatePicker numberOfMonths={2} />
  </Story>
</Canvas>

## Related components

<RelatedComponents componentsNames={[TEXT_FIELD, DROPDOWN, DIALOG_CONTENT_CONTAINER]} />
